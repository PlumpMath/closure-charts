<html>
<head>
<title>JavaScript Charting Unit Tests - Context</title>
<script type="text/javascript" src="http://localhost/closure-library/js/goog/base.js"></script>
<script type="text/javascript" src="http://localhost/javascript-charting-sample/demo/myDeps.js"></script>
<script>
    goog.require('goog.testing.jsunit');
    goog.require('goog.dom');
    goog.require('goog.graphics');
    goog.require('goog.math');
    goog.require('goog.array');

    goog.require('scottlogic.chart.rendering.Context');
</script>
</head>
<body>
<script>  
    // Clear the canvas after the charts have been tested
    function tearDown(){
        var canvas = goog.dom.$('canvas');
        canvas.innerHTML = '';
    }

    function testConvertPath(){
        var plottingArea = new goog.math.Rect(0, 0, 5, 5);
        
        var horizontalPath = new goog.graphics.Path();
        horizontalPath.moveTo(-5, 2.5);
        horizontalPath.lineTo(10, 2.5);

        var horizontalPath_result = new goog.graphics.Path();
        horizontalPath_result.moveTo(0, 2.5);
        horizontalPath_result.lineTo(5, 2.5);

        var verticalPath = new goog.graphics.Path();
        verticalPath.moveTo(2.5, -5);
        verticalPath.lineTo(2.5, 10);

        var verticalPath_result = new goog.graphics.Path();
        verticalPath_result.moveTo(2.5, 0);
        verticalPath_result.lineTo(2.5, 5);

        var context = new scottlogic.chart.rendering.Context(plottingArea);
        
        assertTrue("Horizontal path", goog.array.equals(horizontalPath_result.segments_, context.convertPath(horizontalPath).segments_));
        assertTrue("Vertical path", goog.array.equals(verticalPath_result.segments_, context.convertPath(verticalPath).segments_));
    }
</script>
<div id="canvas"></div>
</body>
</html>
