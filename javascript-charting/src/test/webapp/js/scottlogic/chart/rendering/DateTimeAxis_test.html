<html>
<head>
<title>JavaScript Charting Unit Tests - DateTimeAxis</title>
<script type="text/javascript" src="http://localhost/closure-library/js/goog/base.js"></script>
<script type="text/javascript" src="http://localhost/javascript-charting-sample/demo/myDeps.js"></script>
<script>
    goog.require('goog.testing.jsunit');
    goog.require('goog.dom');
    goog.require('goog.date');

    goog.require('scottlogic.chart.rendering.DateTimeAxis');
</script>
</head>
<body>
<script>  
    // Clear the canvas after the charts have been tested
    function tearDown(){
        var canvas = goog.dom.$('canvas');
        canvas.innerHTML = '';
    }

    function testGetFirstLabelTick(){
        var min = new goog.date.UtcDateTime(2010, goog.date.month.AUG, 5, 15, 0, 0, 0);
        var max = new goog.date.UtcDateTime(2010, goog.date.month.AUG, 10, 15, 0, 0, 0);

        // years
        var yearsInterval = new goog.date.Interval(1, 0, 0, 0, 0, 0);
        var yearsInterval_result = new goog.date.UtcDateTime(2011, goog.date.month.JAN, 1, 0, 0, 0, 0);
        
        var axis = new scottlogic.chart.rendering.DateTimeAxis();
        axis.setMinimum(min);
        axis.setMaximum(max);
        axis.intervalStep = yearsInterval;

        assertEquals("Years interval", axis.normalize(yearsInterval_result), axis.getFirstLabelTick()); 


        // months
        var monthsInterval = new goog.date.Interval(0, 1, 0, 0, 0, 0);
        var monthsInterval_result = new goog.date.UtcDateTime(2010, goog.date.month.SEP, 1, 0, 0, 0, 0);
        
        var axis = new scottlogic.chart.rendering.DateTimeAxis();
        axis.setMinimum(min);
        axis.setMaximum(max);
        axis.intervalStep = monthsInterval;
        assertEquals("Months interval", axis.normalize(monthsInterval_result), axis.getFirstLabelTick());


        // days
        var daysInterval = new goog.date.Interval(0, 0, 1, 0, 0, 0);
        var daysInterval_result = new goog.date.UtcDateTime(2010, goog.date.month.AUG, 6, 0, 0, 0, 0);
        
        var axis = new scottlogic.chart.rendering.DateTimeAxis();
        axis.setMinimum(min);
        axis.setMaximum(max);
        axis.intervalStep = daysInterval;
        assertEquals("Days interval", axis.normalize(daysInterval_result), axis.getFirstLabelTick());


        // hours
        var hoursInterval = new goog.date.Interval(0, 0, 0, 1, 0, 0);
        var hoursInterval_result = new goog.date.UtcDateTime(2010, goog.date.month.AUG, 5, 15, 0, 0, 0);
        
        var axis = new scottlogic.chart.rendering.DateTimeAxis();
        axis.setMinimum(min);
        axis.setMaximum(max);
        axis.intervalStep = hoursInterval;
        assertEquals("Hours interval", axis.normalize(hoursInterval_result), axis.getFirstLabelTick());


        // minutes
        var minutesInterval = new goog.date.Interval(0, 0, 0, 0, 1, 0);
        var minutesInterval_result = new goog.date.UtcDateTime(2010, goog.date.month.AUG, 5, 15, 0, 0, 0);
        
        var axis = new scottlogic.chart.rendering.DateTimeAxis();
        axis.setMinimum(min);
        axis.setMaximum(max);
        axis.intervalStep = minutesInterval;
        assertEquals("Minutes interval", axis.normalize(minutesInterval_result), axis.getFirstLabelTick());
    }
   
</script>
<div id="canvas"></div>
</body>
</html>
