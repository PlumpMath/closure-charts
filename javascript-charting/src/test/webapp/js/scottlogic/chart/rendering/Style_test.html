<html>
<head>
<title>JavaScript Charting Unit Tests - Style</title>
<script type="text/javascript" src="http://localhost/closure-library/js/goog/base.js"></script>
<script type="text/javascript" src="http://localhost/javascript-charting-sample/demo/myDeps.js"></script>
<script>
    goog.require('goog.testing.jsunit');
    goog.require('goog.dom');
    
    goog.require('scottlogic.chart.rendering.Style');
</script>
</head>
<body>
<script>  
    // Clear the canvas after the charts have been tested
    function tearDown(){
        var canvas = goog.dom.$('canvas');
        canvas.innerHTML = '';
    }
    
    function testParent() {
    	var parent = new scottlogic.chart.rendering.Style(null, null, null, "red");
    	
    	var stroke = new goog.graphics.Stroke(1, "green");
    	var defaultStroke = new goog.graphics.Stroke(1, "black");
    	var child = new scottlogic.chart.rendering.Style(parent, stroke, null, null);
    	
    	assertEquals("Child inherits parents font colour", child.getFontColour(), "red");
    	assertEquals("Childs stroke overwrites parents", child.getStroke().getColor(), "green");
    	assertEquals("Parent has default values", parent.getStroke().getColor(), "black");
    }
    
    function testMerge() {
    	var style = new scottlogic.chart.rendering.Style(null, null, null, null);
    	var merger = new scottlogic.chart.rendering.Style(null, null, null, "blue");
    	
    	style.merge(merger);
    	assertEquals("Overwrite", style.getFontColour(), "blue");
    	assertEquals("Defaults still exist", style.getFont().size, 13);
    	
		var parent = new scottlogic.chart.rendering.Style(null, null, null, "red");
    	
    	var stroke = new goog.graphics.Stroke(1, "green");
    	var defaultStroke = new goog.graphics.Stroke(1, "black");
    	var child = new scottlogic.chart.rendering.Style(parent, stroke, null, null);
    	
    	child.merge(merger);
    	
    	assertEquals("Child has merged", child.getFontColour(), "blue");
    	assertEquals("Parent has not merged", parent.getFontColour(), "red");
    }
   
</script>
<div id="canvas"></div>
</body>
</html>
